<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Software Engineering Etiquette</title>
    
    <meta name="description" content="A static site built with Hugo!">
    
    
    <meta name="author" content="Mike Eder">
    

    
    <link rel="me" href="https://universeodon.com/@sqweebking">
    

    <link rel="stylesheet" href='/css/style.css'> 
    <script src="https://kit.fontawesome.com/9ebc75ba92.js" crossorigin="anonymous"></script>
</head>

<body>
    <header id="site-header">
    <div class="nav">
        <a href="https://mikeder.net/">Home</a>  
        <a href="/about/">Abouts</a> 
        <a href="/blog/">Blogs</a> 
        <a href="/projects/">Projects</a> 
        <a href="/synthesizers/">Synthesizers</a>  
    </div>
</header> 
<main id="content" class="content">
    <article class="content-chunk">
        <h1>Software Engineering Etiquette</h1>
        <h5>23.04.2025 20:52</h5>
        <div class="container">
            <p>Building things that people can depend on requires a degree of planning and a willingness to stick to best practices, despite minor upfront timeline inconveniences. When things change, those changes should be documented and communicated to those people that rely on it, quickly and reliably.</p>
<p>I had a conversation at work today about a piece of software my team was integrating with, suddenly failing to return results to a request our server was making. The particular request was environment specific, and it was working earlier in the morning and in the next environment up. While talking with the team that owned the malfunctioning software, they discovered that the request had been changed or renamed and no longer matched the documentation we had been given for our integration. This normally wouldn&rsquo;t be a problem, they could just provide us new documentation, we&rsquo;d update our code, and everything should be happy again. Except they couldn&rsquo;t provide updated documentation. It didn&rsquo;t exist and the change that was made to their software was done in a way that it wasn&rsquo;t clear what people using it would need to do to get things working again.</p>
<p>How does this happen and what can be done to avoid it in the future?</p>
<ol>
<li>Define the application interface with an Interface Definition Language (IDL) and use tooling to generate documentation, server stubs and client code. See protocol buffers</li>
<li>Apply linting to the interface definition to keep naming consistent and enforce documentation standards.</li>
<li>Enforce breaking change detection at the interface level. This prevents breaking changes to an interface that has already be consumed by clients.</li>
</ol>
<h2 id="interface-definition-language">Interface Definition Language</h2>
<p>My preferred IDL is protocol buffers, they&rsquo;re widely used, have great tooling and can be used to represent not only web API&rsquo;s but also custom message protocols. There are a number of code generation tools out there, such as <code>buf</code> and <code>protoc</code>, the former being a more modern alternative the the latter.</p>
<h2 id="linting">Linting</h2>
<p>Linting at the API definition level allows you to enforce consistency across the API methods, naming, documentation, field types, etc.</p>
<p>Examples of lint complaints that should be addressed prior to merging a feature to main:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>meder@astro:gorustadmin$ buf lint
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:5:1:Service <span style="color:#e6db74">&#34;RustAdminService&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:6:3:RPC <span style="color:#e6db74">&#34;AddServer&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:7:3:RPC <span style="color:#e6db74">&#34;GetServerList&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:8:3:RPC <span style="color:#e6db74">&#34;GetServerStatus&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:9:3:RPC <span style="color:#e6db74">&#34;GetConsole&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:10:3:RPC <span style="color:#e6db74">&#34;GetChat&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:11:3:RPC <span style="color:#e6db74">&#34;GivePlayerKit&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:14:1:Message <span style="color:#e6db74">&#34;AddServerRequest&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:15:3:Field <span style="color:#e6db74">&#34;name&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:16:3:Field <span style="color:#e6db74">&#34;address&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:17:3:Field <span style="color:#e6db74">&#34;rcon_password&#34;</span> should have a non-empty comment <span style="color:#66d9ef">for</span> documentation.
</span></span></code></pre></div><p>When these issues are addressed prior to merging a feature to main, the documentation and resulting generated code are all kept to the same standard and up-to-date as soon as the feature is done. You don&rsquo;t have to manually update documentation to match the implementation, the documentation is automatically generated and kept up to date by a repeatable process.</p>
<h2 id="breaking-change-detection">Breaking Change Detection</h2>
<p>The <code>buf</code> cli tool also supports breaking change detection, which is very helpful in ensuring there are no breaking changes to the API contract with clients. It is commonly used to check local changes against either a remote git repository or buf registry package.</p>
<p>The following change should be obvious that it is breaking, but could easily slip through a manual code review. Enforcing breaking change detection as part of a CI/CD system can catch and prevent this type of change from being submitted. Instead a new version of the message should be created to support this type of change.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>diff --git a/proto/rustadmin/v1/rustadmin.proto b/proto/rustadmin/v1/rustadmin.proto
</span></span><span style="display:flex;"><span>index 910c674..8c25aa5 100644
</span></span><span style="display:flex;"><span><span style="color:#f92672">--- a/proto/rustadmin/v1/rustadmin.proto
</span></span></span><span style="display:flex;"><span><span style="color:#f92672"></span><span style="color:#a6e22e">+++ b/proto/rustadmin/v1/rustadmin.proto
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e"></span><span style="color:#75715e">@@ -18,7 +18,7 @@ message AddServerRequest {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> message AddServerResponse {
</span></span><span style="display:flex;"><span><span style="color:#f92672">-  string server_id = 1;
</span></span></span><span style="display:flex;"><span><span style="color:#f92672"></span><span style="color:#a6e22e">+  int32 server_id = 1;
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e"></span> }
</span></span></code></pre></div><h3 id="check-against-remote-git">Check Against Remote Git</h3>
<p>To check for breaking changes against a remote git repository, run <code>buf breaking</code> as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>meder@astro:gorustadmin$ buf breaking --against <span style="color:#e6db74">&#39;https://git.sqweeb.net/mikeder/gorustadmin.git#branch=main&#39;</span>
</span></span><span style="display:flex;"><span>proto/rustadmin/v1/rustadmin.proto:21:3:Field <span style="color:#e6db74">&#34;1&#34;</span> with name <span style="color:#e6db74">&#34;server_id&#34;</span> on message <span style="color:#e6db74">&#34;AddServerResponse&#34;</span> changed type from <span style="color:#e6db74">&#34;string&#34;</span> to <span style="color:#e6db74">&#34;int32&#34;</span>.
</span></span></code></pre></div>
        </div>
        
        <div>
            Tags:
            
            <a href=/tags/software>software</a>
            
            <a href=/tags/engineering>engineering</a>
            
            <a href=/tags/grpc>gRPC</a>
            
            <a href=/tags/server>server</a>
            
            <a href=/tags/programming>programming</a>
            
        </div>
         
        <br>
        <div>
            <a href="javascript:history.back()">
                &lt;&lt; Back</a>
                    <a href="#top">Top ^^</a>
        </div>
    </article>
</main>
 




<div id="myModal" class="modal">
    <div class="modal-content">
        <img class="modal-pic" id="modalPic" onclick="closeModal()"
            style="max-width: 100%; max-height: 80vh; margin: auto;">
    </div>
    <button class="modal-close" onclick="closeModal()">X</button>
</div>

<script>
    
    function openModal(clicked_id) {
        var src = document.getElementById(clicked_id).src;
        if (src.includes("#")) {
            src = src.substring(0, src.indexOf("#"));
        };
        document.getElementById("modalPic").src = src;
        document.getElementById("myModal").style.display = "block";
        
        
        document.getElementById("site-header").style.display = "none";
        document.getElementById("content").style.display = "none";
        document.getElementById("site-footer").style.display = "none";
    }

    
    function closeModal() {
        
        document.getElementById("modalPic").src = "";
        document.getElementById("myModal").style.display = "none";
        
        document.getElementById("site-header").style.display = "block";
        document.getElementById("content").style.display = "block";
        document.getElementById("site-footer").style.display = "block";
    }
    closeModal()
</script>    

<footer id="site-footer">
    <p>
        &copy; 2025 <a href="https://mikeder.net/">mikeder.net</a> v:337187f</p>

    
    <a class="fab fa-bandcamp" style="font-size: 24px" href="https://bandcamp.com/mikeder" target="_blank"></a>
     
    <a class="fab fa-docker" style="font-size: 24px" href="https://hub.docker.com/u/mikeder" target="_blank"></a>
     
    <a class="fab fa-github" rel="me" style="font-size: 24px" href="https://github.com/mikeder" target="_blank"></a>
     
    <a class="fab fa-instagram" style="font-size: 24px" href="https://www.instagram.com/sqweebking/" target="_blank"></a>
     
    <a class="fab fa-mastodon" style="font-size: 24px" href="https://universeodon.com/@sqweebking" target="_blank"></a>
     
    <a class="fab fa-soundcloud" style="font-size: 24px" href="https://soundcloud.com/sqweebking" target="_blank"></a>
     
    <a class="fab fa-youtube" style="font-size: 24px" href="https://www.youtube.com/user/synthatik" target="_blank"></a>
    
</footer>
</body>

</html>